FROM python:3.12-slim

WORKDIR /app

# Install dependencies
RUN pip install --no-cache-dir temporalio

# Copy application code
COPY activities/api_activities.py ./activities/
COPY activities/storage_activities.py ./activities/
COPY activities/__init__.py ./activities/
COPY workers/api_worker.py ./

# Use unbuffered Python output
ENV PYTHONUNBUFFERED=1

CMD ["python", "-u", "api_worker.py"]
